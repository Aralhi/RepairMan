"use strict";
var CustomerRepository = require("./../repository/CustomerRepository");
var CustomerBusiness = (function () {
    function CustomerBusiness() {
        this._customerRepository = new CustomerRepository();
    }
    CustomerBusiness.prototype.retrieve = function (callback) {
        this._customerRepository.retrieve(callback);
    };
    CustomerBusiness.prototype.create = function (item, callback) {
        this._customerRepository.create(item, callback);
    };
    CustomerBusiness.prototype.update = function (_id, item, callback) {
        var _this = this;
        this._customerRepository.findById(_id, function (err, res) {
            if (err)
                callback(err, res);
            else
                _this._customerRepository.update(res._id, item, callback);
        });
    };
    CustomerBusiness.prototype.delete = function (_id, callback) {
        this._customerRepository.delete(_id, callback);
    };
    CustomerBusiness.prototype.find = function (searchText, callback) {
        var reg = new RegExp(searchText, 'i');
        this._customerRepository.find({ $or: [{ 'name': reg }, { 'carNumber': reg }, { 'phone': reg }, { 'carType': reg }] }, callback);
    };
    return CustomerBusiness;
}());
Object.seal(CustomerBusiness);
module.exports = CustomerBusiness;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9idXNpbmVzcy9DdXN0b21lckJ1c2luZXNzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQSx1RUFBMEU7QUFHMUU7SUFHRTtRQUNFLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxJQUFJLGtCQUFrQixFQUFFLENBQUM7SUFDdEQsQ0FBQztJQUVELG1DQUFRLEdBQVIsVUFBUyxRQUEyQztRQUNsRCxJQUFJLENBQUMsbUJBQW1CLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQzlDLENBQUM7SUFFRCxpQ0FBTSxHQUFOLFVBQVEsSUFBb0IsRUFBRSxRQUEyQztRQUN2RSxJQUFJLENBQUMsbUJBQW1CLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxRQUFRLENBQUMsQ0FBQztJQUNsRCxDQUFDO0lBRUQsaUNBQU0sR0FBTixVQUFRLEdBQVcsRUFBRSxJQUFvQixFQUFFLFFBQTJDO1FBQXRGLGlCQU9DO1FBTkMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLFFBQVEsQ0FBQyxHQUFHLEVBQUUsVUFBQyxHQUFHLEVBQUUsR0FBRztZQUM5QyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUM7Z0JBQ04sUUFBUSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztZQUNyQixJQUFJO2dCQUNGLEtBQUksQ0FBQyxtQkFBbUIsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDN0QsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBSUQsaUNBQU0sR0FBTixVQUFRLEdBQVcsRUFBRSxRQUEyQztRQUM5RCxJQUFJLENBQUMsbUJBQW1CLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRyxRQUFRLENBQUMsQ0FBQztJQUNsRCxDQUFDO0lBRUQsK0JBQUksR0FBSixVQUFNLFVBQWtCLEVBQUUsUUFBMkM7UUFDbkUsSUFBTSxHQUFHLEdBQUcsSUFBSSxNQUFNLENBQUMsVUFBVSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ3hDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsRUFBQyxHQUFHLEVBQUUsQ0FBQyxFQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUMsRUFBRSxFQUFDLFdBQVcsRUFBRSxHQUFHLEVBQUMsRUFBRSxFQUFDLE9BQU8sRUFBRSxHQUFHLEVBQUMsRUFBRSxFQUFDLFNBQVMsRUFBRSxHQUFHLEVBQUMsQ0FBQyxFQUFDLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDeEgsQ0FBQztJQUNILHVCQUFDO0FBQUQsQ0FsQ0EsQUFrQ0MsSUFBQTtBQUNELE1BQU0sQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztBQUM5QixpQkFBUyxnQkFBZ0IsQ0FBQyIsImZpbGUiOiJhcHAvYnVzaW5lc3MvQ3VzdG9tZXJCdXNpbmVzcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCYXNlQnVzaW5lc3MgPSByZXF1aXJlKCcuL0Jhc2VCdXNpbmVzcycpO1xuaW1wb3J0IEN1c3RvbWVyUmVwb3NpdG9yeSA9IHJlcXVpcmUoJy4vLi4vcmVwb3NpdG9yeS9DdXN0b21lclJlcG9zaXRvcnknKTtcbmltcG9ydCBJQ3VzdG9tZXJNb2RlbCA9IHJlcXVpcmUoJy4vLi4vbW9kZWwvQ3VzdG9tZXJNb2RlbCcpO1xuXG5jbGFzcyBDdXN0b21lckJ1c2luZXNzIGltcGxlbWVudHMgQmFzZUJ1c2luZXNzPElDdXN0b21lck1vZGVsPiB7XG4gIHByaXZhdGUgX2N1c3RvbWVyUmVwb3NpdG9yeTogQ3VzdG9tZXJSZXBvc2l0b3J5O1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX2N1c3RvbWVyUmVwb3NpdG9yeSA9IG5ldyBDdXN0b21lclJlcG9zaXRvcnkoKTtcbiAgfVxuXG4gIHJldHJpZXZlKGNhbGxiYWNrOiAoZXJyb3I6IGFueSwgcmVzdWx0OiBhbnkpID0+IHZvaWQpIHtcbiAgICB0aGlzLl9jdXN0b21lclJlcG9zaXRvcnkucmV0cmlldmUoY2FsbGJhY2spO1xuICB9XG4gIFxuICBjcmVhdGUgKGl0ZW06IElDdXN0b21lck1vZGVsLCBjYWxsYmFjazogKGVycm9yOiBhbnksIHJlc3VsdDogYW55KSA9PiB2b2lkKSB7XG4gICAgdGhpcy5fY3VzdG9tZXJSZXBvc2l0b3J5LmNyZWF0ZShpdGVtLCBjYWxsYmFjayk7XG4gIH1cbiAgXG4gIHVwZGF0ZSAoX2lkOiBzdHJpbmcsIGl0ZW06IElDdXN0b21lck1vZGVsLCBjYWxsYmFjazogKGVycm9yOiBhbnksIHJlc3VsdDogYW55KSA9PiB2b2lkKSB7XG4gICAgdGhpcy5fY3VzdG9tZXJSZXBvc2l0b3J5LmZpbmRCeUlkKF9pZCwgKGVyciwgcmVzKSA9PiB7XG4gICAgICBpZiAoZXJyKSBcbiAgICAgICAgY2FsbGJhY2soZXJyLCByZXMpO1xuICAgICAgZWxzZVxuICAgICAgICB0aGlzLl9jdXN0b21lclJlcG9zaXRvcnkudXBkYXRlKHJlcy5faWQsIGl0ZW0sIGNhbGxiYWNrKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZpbmRCeUlkOiAoX2lkOiBzdHJpbmcsIGNhbGxiYWNrOiAoZXJyb3I6IGFueSwgcmVzdWx0OiBJQ3VzdG9tZXJNb2RlbCkgPT4gdm9pZCkgPT4gdm9pZDtcbiAgXG4gIGRlbGV0ZSAoX2lkOiBzdHJpbmcsIGNhbGxiYWNrOiAoZXJyb3I6IGFueSwgcmVzdWx0OiBhbnkpID0+IHZvaWQpIHtcbiAgICB0aGlzLl9jdXN0b21lclJlcG9zaXRvcnkuZGVsZXRlKF9pZCAsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIGZpbmQgKHNlYXJjaFRleHQ6IHN0cmluZywgY2FsbGJhY2s6IChlcnJvcjogYW55LCByZXN1bHQ6IGFueSkgPT4gdm9pZCkge1xuICAgIGNvbnN0IHJlZyA9IG5ldyBSZWdFeHAoc2VhcmNoVGV4dCwgJ2knKTtcbiAgICB0aGlzLl9jdXN0b21lclJlcG9zaXRvcnkuZmluZCh7JG9yOiBbeyduYW1lJzogcmVnfSwgeydjYXJOdW1iZXInOiByZWd9LCB7J3Bob25lJzogcmVnfSwgeydjYXJUeXBlJzogcmVnfV19LCBjYWxsYmFjayk7XG4gIH1cbn1cbk9iamVjdC5zZWFsKEN1c3RvbWVyQnVzaW5lc3MpO1xuZXhwb3J0ID0gQ3VzdG9tZXJCdXNpbmVzcztcbiJdfQ==
