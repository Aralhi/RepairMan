"use strict";
var mongoose = require("mongoose");
var RepositoryBase = (function () {
    function RepositoryBase(schemaModel) {
        this._model = schemaModel;
    }
    RepositoryBase.prototype.create = function (item, callback) {
        this._model.create(item, callback);
    };
    RepositoryBase.prototype.retrieve = function (callback) {
        this._model.find({}, callback).sort({ createdAt: -1 });
    };
    RepositoryBase.prototype.update = function (_id, item, callback) {
        this._model.update({ _id: _id }, item, callback);
    };
    RepositoryBase.prototype.delete = function (_id, callback) {
        this._model.remove({ _id: this.toObjectId(_id) }, function (err) { return callback(err, null); });
    };
    RepositoryBase.prototype.findById = function (_id, callback) {
        this._model.findById(_id, callback).sort({ create_at: -1 });
    };
    RepositoryBase.prototype.find = function (conditions, callback) {
        this._model.find(conditions, callback).sort({ create_at: -1 });
    };
    RepositoryBase.prototype.toObjectId = function (_id) {
        return mongoose.Types.ObjectId.createFromHexString(_id);
    };
    return RepositoryBase;
}());
module.exports = RepositoryBase;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC9yZXBvc2l0b3J5L0Jhc2VSZXBvc2l0b3J5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFJQSxtQ0FBc0M7QUFFdEM7SUFJSSx3QkFBYSxXQUE4QztRQUN2RCxJQUFJLENBQUMsTUFBTSxHQUFHLFdBQVcsQ0FBQztJQUM5QixDQUFDO0lBRUQsK0JBQU0sR0FBTixVQUFRLElBQU8sRUFBRSxRQUEyQztRQUN4RCxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDdkMsQ0FBQztJQUVELGlDQUFRLEdBQVIsVUFBVSxRQUEyQztRQUNqRCxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQztJQUN6RCxDQUFDO0lBRUQsK0JBQU0sR0FBTixVQUFRLEdBQTRCLEVBQUUsSUFBTyxFQUFFLFFBQTJDO1FBQ3RGLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUMsR0FBRyxFQUFFLEdBQUcsRUFBQyxFQUFFLElBQUksRUFBRSxRQUFRLENBQUMsQ0FBQztJQUVuRCxDQUFDO0lBRUQsK0JBQU0sR0FBTixVQUFRLEdBQVcsRUFBRSxRQUEyQztRQUM1RCxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxFQUFDLEVBQUUsVUFBQyxHQUFHLElBQUssT0FBQSxRQUFRLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxFQUFuQixDQUFtQixDQUFDLENBQUM7SUFFbEYsQ0FBQztJQUVELGlDQUFRLEdBQVIsVUFBVSxHQUFXLEVBQUUsUUFBeUM7UUFDNUQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUUsR0FBRyxFQUFFLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsRUFBQyxDQUFDLENBQUM7SUFDL0QsQ0FBQztJQUVELDZCQUFJLEdBQUosVUFBTSxVQUFlLEVBQUUsUUFBeUM7UUFDNUQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsRUFBQyxDQUFDLENBQUM7SUFDakUsQ0FBQztJQUVPLG1DQUFVLEdBQWxCLFVBQW9CLEdBQVc7UUFDM0IsTUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLG1CQUFtQixDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQzVELENBQUM7SUFFTCxxQkFBQztBQUFELENBdENBLEFBc0NDLElBQUE7QUFFRCxpQkFBUyxjQUFjLENBQUMiLCJmaWxlIjoiYXBwL3JlcG9zaXRvcnkvQmFzZVJlcG9zaXRvcnkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgSVJlYWQgPSByZXF1aXJlKCcuL2ludGVyZmFjZXMvUmVhZCcpO1xuaW1wb3J0IElXcml0ZSA9IHJlcXVpcmUoJy4vaW50ZXJmYWNlcy9Xcml0ZScpO1xuaW1wb3J0IElIZXJvTW9kZWwgPSByZXF1aXJlKCcuLy4uL21vZGVsL2ludGVyZmFjZXMvSGVyb01vZGVsJyk7XG5cbmltcG9ydCBtb25nb29zZSA9IHJlcXVpcmUoJ21vbmdvb3NlJyk7XG5cbmNsYXNzIFJlcG9zaXRvcnlCYXNlPFQgZXh0ZW5kcyBtb25nb29zZS5Eb2N1bWVudD4gaW1wbGVtZW50cyBJUmVhZDxUPiwgSVdyaXRlPFQ+IHtcblxuICAgIHByaXZhdGUgX21vZGVsOiBtb25nb29zZS5Nb2RlbDxtb25nb29zZS5Eb2N1bWVudD47XG5cbiAgICBjb25zdHJ1Y3RvciAoc2NoZW1hTW9kZWw6IG1vbmdvb3NlLk1vZGVsPG1vbmdvb3NlLkRvY3VtZW50Pikge1xuICAgICAgICB0aGlzLl9tb2RlbCA9IHNjaGVtYU1vZGVsO1xuICAgIH1cblxuICAgIGNyZWF0ZSAoaXRlbTogVCwgY2FsbGJhY2s6IChlcnJvcjogYW55LCByZXN1bHQ6IGFueSkgPT4gdm9pZCkge1xuICAgICAgICB0aGlzLl9tb2RlbC5jcmVhdGUoaXRlbSwgY2FsbGJhY2spO1xuICAgIH1cblxuICAgIHJldHJpZXZlIChjYWxsYmFjazogKGVycm9yOiBhbnksIHJlc3VsdDogYW55KSA9PiB2b2lkKSB7XG4gICAgICAgIHRoaXMuX21vZGVsLmZpbmQoe30sIGNhbGxiYWNrKS5zb3J0KHtjcmVhdGVkQXQ6IC0xfSk7XG4gICAgfVxuXG4gICAgdXBkYXRlIChfaWQ6IG1vbmdvb3NlLlR5cGVzLk9iamVjdElkLCBpdGVtOiBULCBjYWxsYmFjazogKGVycm9yOiBhbnksIHJlc3VsdDogYW55KSA9PiB2b2lkKSB7XG4gICAgICAgIHRoaXMuX21vZGVsLnVwZGF0ZSh7X2lkOiBfaWR9LCBpdGVtLCBjYWxsYmFjayk7XG5cbiAgICB9XG5cbiAgICBkZWxldGUgKF9pZDogc3RyaW5nLCBjYWxsYmFjazogKGVycm9yOiBhbnksIHJlc3VsdDogYW55KSA9PiB2b2lkKSB7XG4gICAgICAgIHRoaXMuX21vZGVsLnJlbW92ZSh7X2lkOiB0aGlzLnRvT2JqZWN0SWQoX2lkKX0sIChlcnIpID0+IGNhbGxiYWNrKGVyciwgbnVsbCkpO1xuXG4gICAgfVxuXG4gICAgZmluZEJ5SWQgKF9pZDogc3RyaW5nLCBjYWxsYmFjazogKGVycm9yOiBhbnksIHJlc3VsdDogVCkgPT4gdm9pZCkge1xuICAgICAgICB0aGlzLl9tb2RlbC5maW5kQnlJZCggX2lkLCBjYWxsYmFjaykuc29ydCh7Y3JlYXRlX2F0OiAtMX0pO1xuICAgIH1cbiAgICBcbiAgICBmaW5kIChjb25kaXRpb25zOiBhbnksIGNhbGxiYWNrOiAoZXJyb3I6IGFueSwgcmVzdWx0OiBUKSA9PiB2b2lkKSB7XG4gICAgICAgIHRoaXMuX21vZGVsLmZpbmQoY29uZGl0aW9ucywgY2FsbGJhY2spLnNvcnQoe2NyZWF0ZV9hdDogLTF9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHRvT2JqZWN0SWQgKF9pZDogc3RyaW5nKTogbW9uZ29vc2UuVHlwZXMuT2JqZWN0SWQge1xuICAgICAgICByZXR1cm4gbW9uZ29vc2UuVHlwZXMuT2JqZWN0SWQuY3JlYXRlRnJvbUhleFN0cmluZyhfaWQpO1xuICAgIH1cblxufVxuXG5leHBvcnQgPSBSZXBvc2l0b3J5QmFzZTsiXX0=
